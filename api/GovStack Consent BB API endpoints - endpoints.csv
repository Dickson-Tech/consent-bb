Endpoint slug,Type,Use case,Scenario,Arguments,Returns,Description,Data sensitivity,summary,API Label,responseOK,security,CRUDL model
API tag: config,,,,,,,,,,,,
CRUDL for Policy object,,,,,,,,,,,,
/config/policy/,POST,UC-C-PIC-A-001,,Policy*,"Policy, Revision",CREATE - Creates a new Policy object and returns the new object and a PolicyRevision,FALSE,,configCreatePolicy,"A set consisting of the new Policy object created, together with the initial Revision object.",org,Policy
/config/policy/{policyId}/,GET,UC-C-PIC-A-003,,revisionId,"Policy, Revision","READ - get a Policy object + latest Revision. If a PolicyFilter is supplied and contains a revision_id, then this specific revision is returned.",FALSE,,configReadPolicy,,org,Policy
/config/policy/{policyId}/revisions/,GET,UC-C-PIC-A-003,,,Policy,LIST - returns the current Policy,FALSE,,configListPolicyRevisions,,org,Revision
/config/policy/{policyId}/,PUT,UC-C-PIC-A-002,,Policy*,"Policy, Revision","UPDATE - Updates an existing Policy object, returning the updated version and a new revision. Updating a Policy does not affect existing references in Agreement, the new revision should be specified for Agreement.",FALSE,,configUpdatePolicy,,org,Policy
/config/policy/{policyId}/,DELETE,UC-C-PIC-A-004,,,Revision,"DELETE - Deletes an existing Policy object, returning the updated version and a new revision. Deleting a Policy is not possible if it's associated with active Agreement.",FALSE,,configDeletePolicy,,org,Policy
/config/policies/,GET,"UC-C-PIC-A-001, UC-C-PIC-A-002",,revisionId,Policy<List>,LIST - Fetches list of readable Policy objects,FALSE,Returns a list of readable Policy objects,configListPolicy,A list of Policy objects readable for the current session's credentials.,admin,Policy
CRUDL for Agreement object,,,,,,,FALSE,,,,org,
/config/agreement/{agreementId}/,GET,UC-C-PIC-A-003,,,"Agreement, Revision",READ - fetches the latest version of an Agreement,FALSE,,configReadAgreement,,org,Agreement
/config/agreement/,POST,UC-C-PIC-A-001,,Agreement*,"Agreement, Revision",CREATE - A new Agreement object is created and returned together with AgreementRevision,FALSE,,configCreateAgreement,,org,Agreement
/config/agreement/{agreementId}/,PUT,UC-C-PIC-A-002,,Agreement*,"Agreement, Revision",UPDATE - An existing Agreement object is created and returned together with AgreementRevision,FALSE,,configUpdateAgreement,,org,Agreement
/config/agreement/{agreementId}/,DELETE,UC-C-PIC-A-004,,,Revision,,FALSE,,configDeleteAgreement,,org,Agreement
/config/agreements/,GET,UC-C-PIC-A-003,,filterAgreementName,Agreement<List>,LIST - fetch all Agreements,FALSE,,configListAgreement,,org,Agreement
"CRUDL for ""Individual"" object (configuration and onboarding)",,,,,,,TRUE,,,,org,Individual
/config/individual/,POST,,,Individual*,Individual,CREATE - Creates an Individual in the Consent system,TRUE,,serviceIndividualCreate,,org,Individual
/config/individual/{individualId}/,GET,,,,Individual,READ - Fetch an Individual in the Consent system,TRUE,,serviceIndividualRead,,org,Individual
/config/individuals/,GET,,,"filterFunctionalId, filterFoundationalId",Individual<List>,LIST - lists individuals in the system,TRUE,,serviceIndividualList,,org,Individual
,,,,,,,FALSE,,,,,
API tag: service,,,,,,,,,,,,
"CRUDL for ""Individual"" object",,,,,,,TRUE,,,,org,Individual
/service/individual/,POST,,,Individual*,Individual,CREATE - Creates an Individual in the Consent system,TRUE,,serviceIndividualCreate,,org,Individual
/service/individual/{individualId}/,GET,,,,Individual,READ - Fetch an Individual in the Consent system,TRUE,,serviceIndividualRead,,org,Individual
/service/individual/{individualId}/,PUT,,,Individual*,Individual,UPDATE - Updates an Individual in the Consent system,TRUE,,serviceIndividualUpdate,,org,Individual
/service/individuals/,GET,,,"filterFunctionalId, filterFoundationalId",Individual<List>,LIST - lists individuals in the system,TRUE,,serviceIndividualList,,org,Individual
"Read operation for ""Agreement"" object",,,,,,,FALSE,,,,,
/service/agreement/{agreementId}/,GET,UC-C-PIC-A-003,,,"Agreement, Revision",READ - fetches the latest version of an Agreement,FALSE,,serviceAgreementRead,,org,Agreement
"Read operation for ""Policy"" object",,,,,,,FALSE,,,,,
/service/policy/{policyId}/,GET,UC-C-PIC-A-003,,revisionId,"Policy, Revision",READ - fetches the latest version of a Policy and the presented revisionId of an associated Agreement,FALSE,,servicePolicyRead,,org,Policy
"List operation for ""AgreementData"" object",,,,,,,FALSE,,,,,
/service/agreement/{agreementId}/agreementdata/,GET,UC-C-PIC-A-003,,revisionId,AgreementData<List>,READ - fetches a list of latest versions of AgreementData associated with an Agreement and the presented revisionId of that Agreement,FALSE,,serviceAgreementDataRead,,org,AgreementData
Verification mechanisms,,,,,,,FALSE,,,,,
/service/verification/agreements/,GET,UC-C-PIC-A-003,1.1,filterAgreementName,Agreement<List>,LIST - Fetch ,FALSE,,serviceVerificationAgreementList,,consumer,
/service/verification/consentrecords/,GET,UC-C-PIC-A-003,"3.1, 1.2","filterOptIn, filterAgreementId, filterAgreementRevisionId, filterIndividualId, filterFunctionalId, filterFoundationalId",ConsentRecord<List>,"LIST - Fetch consent records (latest revision). For a given ConsentRecordFilter, query if consent exists.",TRUE,,serviceVerificationConsentRecordList,,consumer,
/service/verification/consentrecord/{consentRecordId},GET,UC-C-PIC-A-003,"3.1, 1.2",,"ConsentRecord, Revision",READ - Reads a consent record by its ID.,TRUE,,serviceVerificationConsentRecordList,,consumer,
Recording consent (giving/withdrawing),,,,,,All services need to specify the Individual ID as an HTTP header.,FALSE,,,,,
/service/individual/record/agreement/{agreementId}/,POST,UC-C-PIC-I-002,1.2,"individualId*, revisionId","ConsentRecord, Revision","CREATE - For a particular Individual and a particular Agreement, create a new Consent Record pointing to the current Revision of a given Agreement. Individual ID supplied as HTTP header.",TRUE,,serviceCreateIndividualConsentRecord,,individual,
/service/individual/record/consent-record/draft/,POST,UC-C-PIC-I-002,1.2,"individualId*, agreementId*, revisionId","ConsentRecord, Signature",CREATE - Gets a DRAFT (unsaved) ConsentRecord and Signature objects (without a PK) for a given agreementId.,TRUE,,serviceCreateIndividualConsentRecordDraft,,individual,
/service/individual/record/consent-record/,POST,UC-C-PIC-I-002,1.2,"ConsentRecord*, Signature*","ConsentRecord, Revision, Signature",CREATE - Creates a paired ConsentRecord and Signature object. Returns the same objects with the PK defined.,TRUE,,serviceCreateIndividualConsentRecordAndSignature,,individual,
/service/individual/record/consent-record/,GET,UC-C-PIC-I-001,,,ConsentRecord<List>,LIST - Fetches all current unambiguous consent records stored for Individual ID. Individual ID supplied as HTTP header.,TRUE,,serviceListIndividualConsentRecordList,,individual,
/service/individual/record/consent-record/{consentRecordId}/,PUT,UC-C-PIC-I-003,,"individualId*, agreementId*, revisionId","ConsentRecord, Revision",UPDATE* - Update a particular Consent Record. Individual ID supplied as HTTP header. Note that updating a signed Consent Record invalidates its signature.,TRUE,,serviceUpdateIndividualConsentRecord,,individual,
/service/individual/record/consent-record/{consentRecordId}/signature/,POST,UC-Post-Partum-001-Registration_PostPartum_and_InfantCare,,,Signature,CREATE - Creates and returns a blank Signature object for the Consent Record.,TRUE,,serviceCreateIndividualConsentRecordSignature,,individual,
/service/individual/record/consent-record/{consentRecordId}/signature/,PUT,UC-Post-Partum-001-Registration_PostPartum_and_InfantCare,,Signature*,Signature,UPDATE - Updates a Signature object for a Consent Record. This is used to add a signature to an existing unsigned Signature object. Consent BB is responsible for updating the Consent Record state.,TRUE,,serviceUpdateIndividualConsentRecordSignature,,individual,
/service/individual/record/agreement/{agreementId}/all/,GET,UC-C-PIC-I-001,,,ConsentRecord<List>,LIST - Fetches all consent records given to a particular agreement. Individual ID supplied as HTTP header.,TRUE,,serviceListIndividualAgreementConsentRecordList,,individual,
/service/individual/record/agreement/{agreementId}/,GET,UC-C-PIC-I-001,,,ConsentRecord,READ - Individual ID supplied as HTTP header. Fetches the current ConsentRecord for an Agreement. There should be one unambiguous ConsentRecord for an Individual and an Agreement.,TRUE,,serviceReadIndividualRecordRead,,individual,
/service/individual/record/,DELETE,UC-C-PIC-I-003,,,,"DELETE - Cascading delete operation for Right To Be Forgotten, deletes all Consent Records that shall not be retained and have a ""forgettable"" Agreement. May also delete an unsigned Consent Record, for instance in cases where the user exits the signing process. Individual ID supplied as HTTP header.",TRUE,,serviceDeleteAllRecords,,individual,
,,,,,,,,,,,,
API tag: auditor,,,,,,,,,,,,
/audit/consentrecords/,GET,UC-C-PIC-AT-003,,"filterOptIn, filterAgreementId, filterAgreementRevisionId, filterIndividualId, filterFunctionalId, filterFoundationalId",ConsentRecord<List>,LIST - fetch ConsentRecord objects,,,auditConsentRecordList,,,
/audit/consentrecord/{consentRecordId}/,GET,,,,ConsentRecord,READ,,,auditConsentRecordRead,,,
/audit/agreements/,POST,"UC-C-PIC-AT-001, UC-C-PIC-AT-003",,filterAgreementName,Agreement<List>,LIST - fetch all Agreements stored in the system.,,,auditAgreementList,,,
/audit/agreement/{agreementId}/,GET,"UC-C-PIC-AT-001, UC-C-PIC-AT-003",,,Agreement,READ - fetch a single Agreement.,,,auditReadRecord,,,
,,,,,,,,,,,,
,,,,,,,,,,,,
,,,,,,,,,,,,
,,,,,,,,,,,,
,,,,,,,,,,,,
,,,,,,,,,,,,
,,,,,,,,,,,,
,,,,,,,,,,,,
Questions / notes,,,,,,,,,,,,
"Sensitive/Personal data - Make Individual ID stored as some kind of anonymous token in HTTP headers, session state or like-wise. We should avoid spilling over individually identifiable data in HTTP server logs etc.",,,,,,,,,,,,
List filters and pagination,,,,,,,,,,,,
"Should we have CRUD for ""Individual""?",,,,,,,,,,,,
TODO,,,,,,,,,,,,
Stop mixing query parameters and request body parameters in the same column,,,,,,,,,,,,